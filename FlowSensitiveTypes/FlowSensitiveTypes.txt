

namespace VarValue: Term
namespace VarType: Type

sort Term
  inh ctx VarValue
  inh tctx VarType
  | TmVariable (x@ctx)
  | TmApply (t1: Term) (t2: Term)
  | TmTypeApply (t1: Term) (t2: Type)
  | TmIf (cond: Term) (thn: Term) (els: Term)
  | TmIsEq (a: Term) (b: Term)
  | TmAnd (a: Term) (b: Term)
  | TmOr (a: Term) (b: Term)
  | TmAbstraction (t: Term) [z: VarValue]
    t.ctx = lhs.ctx, z
    t.tctx = lhs.tctx
  | TmTypeAbstraction (typeTerm: Term) (superType: Type) [z: VarType]
    typeTerm.ctx = lhs.ctx
    typeTerm.tctx = lhs.tctx, z
    superType.tyctx = lhs.tctx
  | TmAnnotation (term: Term) (termType: Type)
  | TmTrue
  | TmFalse

sort Type
  inh tyctx VarType
  | TypVariable (t@tyctx)
  | TypFunction (from: Type) (to: Type)
  | TypUniversal (on: Type) (superType: Type) [t: VarType]
    on.tyctx = lhs.tyctx, t
    superType.tyctx = lhs.tyctx
  | TypUnion (a: Type) (b: Type)
  | TypRecord (tru: Type) (fls: Type) (selector: Type)
  | TypTrue
  | TypFalse
  | TypBool
  | Top
  | Typ {String}
  